#!/usr/bin/env bash
# bin/compile <build-dir> <cache-dir>
set -e

BUILD_DIR=$1
CACHE_DIR=$2

FONTS_FILE="$BUILD_DIR/fonts.tar.gz"
TARGET_DIR="$BUILD_DIR/.fonts"

mkdir -p "$TARGET_DIR"
if [ -f $FONTS_FILE ]; then
  echo '-----> Fonts archive found, extrating archive...'
  tar -xvzf "$FONTS_FILE" -C "$TARGET_DIR"

  echo '-----> Building font information caches...'
  fc-cache -fv

  echo '-----> Font cache updated successfully!'
else
  echo "-----> Fonts archive $FONTS_FILE not found!"
fi
